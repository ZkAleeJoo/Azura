<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dise√±a tu Funko - Azura Shop</title>
    <link rel="icon" href="assets/img/logo-azura.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <header class="header-principal">
        <div class="container-nav">
            <div class="logo"><a href="index.html" class="logo-texto">AZURA</a></div>
            <div class="search-bar">
                <input type="text" placeholder="¬øQu√© buscas hoy?...">
                <button>üíñ</button>
            </div>
            <div class="user-actions">
                <button class="btn-carrito" onclick="window.location.href='index.html'">
                    üè† Volver
                </button>
            </div>
        </div>
    </header>

    <main class="container-detalle">
        
        <div class="producto-imagen">
            <img src="assets/img/funko-pareja.png" alt="Funko Personalizado Referencia">
        </div>

        <div class="producto-info">
            <h2>Funko Pop Personalizado (Custom) ‚ú®</h2>
            
            <p class="precio-grande">S/ <span id="precio-display">30.00</span></p>
            
            <p class="descripcion">
                ¬°Hazte inmortal en formato Funko! Describe c√≥mo quieres tu figura y a√±ade accesorios especiales si lo necesitas.
            </p>

            <form id="form-custom" class="formulario-cute">
                
                <div class="campo">
                    <label>Tu Nombre Completo:</label>
                    <input type="text" id="cliente-nombre" placeholder="¬øQui√©n lo recibir√°?" required>
                </div>

                <div class="campo">
                    <label>Detalles del Funko:</label>
                    <textarea id="cliente-detalles" rows="4" placeholder="Ej: Quiero que tenga una camiseta de la 'U', lentes negros y una guitarra..." required></textarea>
                </div>

                <div class="seccion-extras">
                    <label style="color: var(--color-secundario); font-weight: bold; margin-bottom: 10px; display: block;">Agrega Detalles Extra:</label>
                    
                    <div class="control-extra">
                        <div class="info-extra">
                            <span>Detalle Peque√±o (S/ 1.00)</span>
                            <small>Ej: Aretes, collar simple, reloj.</small>
                        </div>
                        <div class="contador">
                            <button type="button" onclick="cambiarExtra('peque', -1)">-</button>
                            <span id="cantidad-peque">0</span>
                            <button type="button" onclick="cambiarExtra('peque', 1)">+</button>
                        </div>
                    </div>

                    <div class="control-extra">
                        <div class="info-extra">
                            <span>Detalle Grande (S/ 5.00)</span>
                            <small>Ej: Guitarra, espada, mascota, sombrero.</small>
                        </div>
                        <div class="contador">
                            <button type="button" onclick="cambiarExtra('grande', -1)">-</button>
                            <span id="cantidad-grande">0</span>
                            <button type="button" onclick="cambiarExtra('grande', 1)">+</button>
                        </div>
                    </div>
                </div>
                <p style="color: #888; font-size: 0.9rem; margin: 20px 0;">
                    üì∏ <b>Nota:</b> La foto de referencia nos la enviar√°s por WhatsApp al finalizar.
                </p>

                <button type="submit" class="btn-comprar-ahora">
                    Comprar en WhatsApp üì±
                </button>
            </form>
        </div>

    </main>

    <div id="modal-aviso-foto" class="modal-aviso">
        <div class="contenido-aviso">
            <h3>¬°Un detalle importante! üì∏</h3>
            <p>Para que tu Funko quede perfecto, necesitamos ver c√≥mo lo quieres.</p>
            <div class="caja-destacada">
                <p>Al abrirse el chat, por favor<br><strong>ADJUNTA TU FOTO DE REFERENCIA</strong></p>
            </div>
            <button onclick="irAWhatsAppFinal()" class="btn-entendido">
                ¬°Entendido! Vamos ‚ú®
            </button>
        </div>
    </div>

    <script>
        let precioBase = 35.00;
        let precioPeque = 1.00;
        let precioGrande = 5.00;
        
        let cantPeque = 0;
        let cantGrande = 0;
        let precioTotal = 35.00;

        let nombreCliente = "";
        let detallesCliente = "";

        function cambiarExtra(tipo, cantidad) {
            if (tipo === 'peque') {
                cantPeque += cantidad;
                if (cantPeque < 0) cantPeque = 0;
                document.getElementById('cantidad-peque').innerText = cantPeque;
            } else {
                cantGrande += cantidad;
                if (cantGrande < 0) cantGrande = 0;
                document.getElementById('cantidad-grande').innerText = cantGrande;
            }
            actualizarPrecio();
        }

        function actualizarPrecio() {
            precioTotal = precioBase + (cantPeque * precioPeque) + (cantGrande * precioGrande);
            document.getElementById('precio-display').innerText = precioTotal.toFixed(2);
        }

        document.getElementById('form-custom').addEventListener('submit', function(e) {
            e.preventDefault(); 
            nombreCliente = document.getElementById('cliente-nombre').value;
            detallesCliente = document.getElementById('cliente-detalles').value;
            
            document.getElementById('modal-aviso-foto').style.display = 'flex';
        });

        function irAWhatsAppFinal() {
            var numeroAzura = "51903226700";
            
            let textoExtras = "Ninguno";
            if (cantPeque > 0 || cantGrande > 0) {
                textoExtras = ""; 
                if (cantPeque > 0) textoExtras += cantPeque + " Detalles Peque√±os%0A";
                if (cantGrande > 0) textoExtras += cantGrande + " Detalles Grandes%0A";
            }

            var mensaje = "Hola Azura, deseo realizar el siguiente pedido:%0A%0A" +
                          "*RESUMEN DE COMPRA (Custom)*%0A" +
                          "--------------------------------%0A" +
                          "‚Ä¢ *Producto:* Funko Personalizado%0A" +
                          "‚Ä¢ *Cliente:* " + nombreCliente + "%0A" +
                          "‚Ä¢ *Detalles:* " + detallesCliente + "%0A" +
                          "‚Ä¢ *Extras:* " + textoExtras + "%0A" +
                          "--------------------------------%0A" +
                          "*TOTAL A PAGAR: S/ " + precioTotal.toFixed(2) + "*%0A" +
                          "--------------------------------%0A%0A" +
                          "*Nota:* Adjunto mi foto de referencia a continuaci√≥n.";

            var url = "https://wa.me/" + numeroAzura + "?text=" + mensaje;
            window.open(url, '_blank');
            document.getElementById('modal-aviso-foto').style.display = 'none';
        }
    </script>

<div id="modal-alerta" class="modal-aviso">
        <div class="contenido-aviso">
            <h3 id="titulo-alerta">¬°Atenci√≥n! üíñ</h3>
            <p id="mensaje-alerta">Aqu√≠ va el mensaje...</p>
            <button onclick="cerrarAlerta()" class="btn-entendido">
                Entendido ‚ú®
            </button>
        </div>
    </div>

</body>
</html>